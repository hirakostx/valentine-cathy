<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cath √ó Momo üíò</title>

<style>
html,body{margin:0;height:100%;overflow:hidden}
body{
  font-family:"Comic Sans MS", system-ui, sans-serif;
  background:#04050a;
  color:white;
  user-select:none;
}
:root{
  --yes:#ff2e63;
  --no:#222;
  --glass:rgba(255,255,255,.12);
  --border:rgba(255,255,255,.22);
}

/* ===== BACKGROUND ===== */
#bg{position:fixed;inset:0;z-index:0}

/* Cath x Momo pattern */
.pattern{
  position:fixed;inset:-50%;z-index:1;pointer-events:none;
}
.pattern::before{
  content:"Cath √ó Momo   Cath √ó Momo   Cath √ó Momo   Cath √ó Momo   ";
  position:absolute;
  inset:0;
  font-size:3rem;
  opacity:.09;
  white-space:nowrap;
  transform:rotate(-20deg);
  animation:scroll 38s linear infinite;
}
@keyframes scroll{
  from{transform:translateX(0) rotate(-20deg)}
  to{transform:translateX(-50%) rotate(-20deg)}
}

/* Moon */
.moon{
  position:fixed;
  top:10%;right:8%;
  width:140px;height:140px;
  border-radius:50%;
  background:radial-gradient(circle at 30% 30%, #fff, #d9d9d9 60%, #aaa 100%);
  box-shadow:0 0 40px rgba(255,255,255,.35);
  animation:moonFloat 6s ease-in-out infinite;
  z-index:1;
}
@keyframes moonFloat{
  0%,100%{transform:translateY(0)}
  50%{transform:translateY(-18px)}
}

/* ===== UI ===== */
.ui{
  position:fixed;inset:0;z-index:2;
  display:flex;align-items:center;justify-content:center;
  pointer-events:none;padding:18px;
}
.card{
  pointer-events:auto;
  width:min(720px,92vw);
  padding:22px;border-radius:26px;
  background:var(--glass);
  border:1px solid var(--border);
  backdrop-filter:blur(10px);
  text-align:center;
  animation:pop .7s ease;
}
@keyframes pop{
  from{opacity:0;transform:scale(.95)}
  to{opacity:1;transform:scale(1)}
}

h1{
  margin:0 0 10px;
  font-size:clamp(2rem,4vw,3rem);
  animation:pulse 2s infinite;
}
@keyframes pulse{
  0%,100%{transform:scale(1)}
  50%{transform:scale(1.05)}
}

.toast{min-height:28px;margin-bottom:8px}

.row{
  position:relative;
  height:120px;
}

button{
  position:absolute;
  top:30px;
  border:none;
  border-radius:999px;
  padding:14px 28px;
  font-size:1.15rem;
  cursor:pointer;
  box-shadow:0 12px 28px rgba(0,0,0,.35);
  user-select:none;
  transition:transform .12s ease;
}
button:active{transform:scale(.97)}

#yes{
  left:28%;
  transform:translateX(-50%);
  background:var(--yes);
  color:white;
}
#no{
  left:72%;
  transform:translateX(-50%);
  background:var(--no);
  color:white;
}

.tip{font-size:.95rem;opacity:.9;margin-top:10px}

/* Particles */
.particle{
  position:fixed;
  top:-12vh;
  font-size:2.2rem;
  pointer-events:none;
  z-index:6;
  animation:fall linear forwards;
}
@keyframes fall{
  to{transform:translateY(120vh);opacity:0}
}

/* Katana */
.katana{
  position:absolute;
  font-size:3rem;
  pointer-events:none;
  animation:stab .45s ease-out forwards;
  z-index:10;
}
@keyframes stab{
  from{transform:translate(-50px,-120px) rotate(-45deg);opacity:0}
  to{transform:translate(0,0) rotate(15deg);opacity:1}
}

/* Final overlay */
#finalOverlay{
  position:fixed;inset:0;z-index:20;
  display:none;align-items:center;justify-content:center;
  background:rgba(0,0,0,.6);
}
.finalCard{
  background:rgba(255,255,255,.12);
  border:1px solid rgba(255,255,255,.25);
  border-radius:26px;
  padding:26px;
  text-align:center;
  backdrop-filter:blur(12px);
}
</style>
</head>

<body>

<canvas id="bg"></canvas>
<div class="pattern"></div>
<div class="moon"></div>

<div class="ui">
  <div class="card" id="card">
    <h1>Veux-tu √™tre ma Valentine ? üíò</h1>
    <div class="toast" id="toast">Choisis bien‚Ä¶ üòè</div>

    <div class="row" id="zone">
      <button id="yes">OUI üíñ</button>
      <button id="no">NON üò≠</button>
    </div>

    <div class="tip">Toucher le NON est dangereux‚Ä¶ ‚öîÔ∏è</div>
  </div>
</div>

<div id="finalOverlay">
  <div class="finalCard">
    <h2>üî• Surprise üî•</h2>
    <p>
      d√©p√™che-toi de me faire un c√¢lin‚Ä¶<br>
      √ßa va chauffer toi et moi plus que tes flammes snap üî•üòè
    </p>
  </div>
</div>

<script src="https://unpkg.com/three@0.160.0/build/three.min.js"></script>
<script>
/* === 3D BACKGROUND === */
const c=document.getElementById("bg");
const r=new THREE.WebGLRenderer({canvas:c,antialias:false});
r.setPixelRatio(Math.min(2,devicePixelRatio));
const s=new THREE.Scene();
s.background=new THREE.Color(0x06070c);
const cam=new THREE.PerspectiveCamera(55,1,.1,200);
cam.position.set(0,10,26);
s.add(new THREE.HemisphereLight(0xffcce0,0x2b2f55,1.1));
const d=new THREE.DirectionalLight(0xffffff,.6);
d.position.set(10,20,10);
s.add(d);
const g=new THREE.BoxGeometry(1,1,1);
const m=new THREE.MeshLambertMaterial({color:0x4caf50});
const size=40;
const mesh=new THREE.InstancedMesh(g,m,size*size);
s.add(mesh);
const o=new THREE.Object3D();
let i=0;
for(let x=0;x<size;x++){
  for(let z=0;z<size;z++){
    o.position.set(x-size/2,Math.sin(x*.3)+Math.cos(z*.3),z-size/2);
    o.updateMatrix();
    mesh.setMatrixAt(i++,o.matrix);
  }
}
function resize(){
  r.setSize(innerWidth,innerHeight,false);
  cam.aspect=innerWidth/innerHeight;
  cam.updateProjectionMatrix();
}
addEventListener("resize",resize);resize();
function anim(t){
  requestAnimationFrame(anim);
  cam.lookAt(0,2,0);
  r.render(s,cam);
}
anim();

/* === GAMEPLAY === */
const yes=document.getElementById("yes");
const no=document.getElementById("no");
const toast=document.getElementById("toast");
const zone=document.getElementById("zone");
let yesCount=0;

function rain(n){
  const em=["‚ú®","üíñ","üíò","üî•","‚≠ê"];
  for(let i=0;i<n;i++){
    const d=document.createElement("div");
    d.className="particle";
    d.textContent=em[Math.floor(Math.random()*em.length)];
    d.style.left=Math.random()*100+"vw";
    d.style.animationDuration=(Math.random()*2+2)+"s";
    document.body.appendChild(d);
    setTimeout(()=>d.remove(),4000);
  }
}

/* Katana stab */
function stabNo(){
  const k=document.createElement("div");
  k.className="katana";
  k.textContent="üó°Ô∏è";
  k.style.left=no.offsetLeft+20+"px";
  k.style.top=no.offsetTop-10+"px";
  zone.appendChild(k);
  setTimeout(()=>k.remove(),500);
}

zone.addEventListener("mousemove",(e)=>{
  no.style.left=Math.random()*80+10+"%";
});

no.addEventListener("mouseenter",()=>{
  toast.textContent="OUCH üò≠ fais pas √ßa‚Ä¶";
  stabNo();
  rain(20);
});

yes.onclick=()=>{
  yesCount++;
  rain(30+yesCount*10);
  toast.textContent=["T‚Äôes s√ªre ? üò≥","Encore ? üíò","OK üòç","C‚Äôest officiel üî•"][Math.min(yesCount-1,3)];
  if(yesCount>=4){
    document.getElementById("finalOverlay").style.display="flex";
  }
};
</script>

</body>
</html>
