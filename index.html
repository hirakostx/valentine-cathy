<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cath √ó Momo üíò</title>

<style>
html,body{margin:0;height:100%;overflow:hidden}
body{
  font-family:"Comic Sans MS", system-ui, sans-serif;
  background:#04050a;
  color:white;
  user-select:none;
}
button{font-family:inherit}

/* ===== MINI GAME ===== */
#game{
  position:fixed;
  inset:0;
  background:linear-gradient(#6fb1ff,#cce6ff);
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:50;
}
#gameBox{
  width:360px;
  max-width:92vw;
  background:#222;
  border-radius:16px;
  padding:10px;
  box-shadow:0 10px 40px rgba(0,0,0,.4);
}
canvas{background:#87ceeb;border-radius:10px;display:block;margin:auto}
#gameText{text-align:center;margin-top:8px}
.controls{
  display:flex;
  justify-content:center;
  gap:10px;
  margin-top:8px;
}
.ctrl{
  width:60px;height:40px;
  border:none;border-radius:10px;
  font-size:18px;
}

/* ===== MAIN SITE (hidden until win) ===== */
#site{display:none}

/* ---- (le reste = TON SITE, inchang√©) ---- */
:root{
  --yes:#ff2e63;
  --no:#222;
  --glass:rgba(255,255,255,.12);
  --border:rgba(255,255,255,.22);
}
#bg{position:fixed;inset:0;z-index:0}
.pattern{
  position:fixed;inset:-50%;z-index:1;pointer-events:none;
}
.pattern::before{
  content:"Cath √ó Momo   Cath √ó Momo   Cath √ó Momo   Cath √ó Momo   ";
  position:absolute;inset:0;
  font-size:3rem;opacity:.09;
  white-space:nowrap;
  transform:rotate(-20deg);
  animation:scroll 38s linear infinite;
}
@keyframes scroll{
  from{transform:translateX(0) rotate(-20deg)}
  to{transform:translateX(-50%) rotate(-20deg)}
}
.moon{
  position:fixed;top:10%;right:8%;
  width:150px;height:150px;border-radius:50%;
  background:radial-gradient(circle at 30% 30%, #fff,#d9d9d9 60%,#aaa 100%);
  box-shadow:0 0 50px rgba(255,255,255,.4);
  animation:moonFloat 6s ease-in-out infinite;
  z-index:1;
}
@keyframes moonFloat{
  0%,100%{transform:translateY(0)}
  50%{transform:translateY(-18px)}
}
.ui{
  position:fixed;inset:0;z-index:2;
  display:flex;align-items:center;justify-content:center;
  pointer-events:none;padding:18px;
}
.card{
  pointer-events:auto;
  width:min(720px,92vw);
  padding:22px;border-radius:26px;
  background:var(--glass);
  border:1px solid var(--border);
  backdrop-filter:blur(10px);
  text-align:center;
}
.row{position:relative;height:110px}
button.choice{
  position:absolute;top:26px;
  padding:14px 28px;border-radius:999px;border:none;
  font-size:1.15rem;cursor:pointer;
}
#yes{left:28%;transform:translateX(-50%);background:var(--yes);color:white}
#no{left:72%;transform:translateX(-50%);background:var(--no);color:white}
.particle{
  position:fixed;top:-10vh;font-size:2.2rem;animation:fall linear forwards;
}
@keyframes fall{to{transform:translateY(120vh);opacity:0}}
#finalOverlay{
  position:fixed;inset:0;z-index:20;
  display:none;align-items:center;justify-content:center;
  background:rgba(0,0,0,.6);
}
.finalCard{
  background:rgba(255,255,255,.12);
  border:1px solid rgba(255,255,255,.25);
  border-radius:26px;padding:26px;text-align:center;
}
</style>
</head>

<body>

<!-- MINI GAME -->
<div id="game">
  <div id="gameBox">
    <canvas id="c" width="320" height="180"></canvas>
    <div id="gameText">Attrape le üíñ pour continuer</div>
    <div class="controls">
      <button class="ctrl" id="left">‚óÄ</button>
      <button class="ctrl" id="jump">‚ñ≤</button>
      <button class="ctrl" id="right">‚ñ∂</button>
    </div>
  </div>
</div>

<!-- MAIN SITE -->
<div id="site">
  <canvas id="bg"></canvas>
  <div class="pattern"></div>
  <div class="moon"></div>

  <div class="ui">
    <div class="card" id="card">
      <h1>Veux-tu √™tre ma Valentine ? üíò</h1>
      <div>Cath √ó Momo üíï</div>
      <div class="row" id="zone">
        <button class="choice" id="yes">OUI üíñ</button>
        <button class="choice" id="no">NON üò≠</button>
      </div>
    </div>
  </div>

  <div id="finalOverlay">
    <div class="finalCard">
      <h2>üî• Surprise üî•</h2>
      <p>d√©p√™che-toi de me faire un c√¢lin‚Ä¶<br>
      √ßa va chauffer toi et moi plus que tes flammes snap üî•üòè</p>
    </div>
  </div>
</div>

<script src="https://unpkg.com/three@0.160.0/build/three.min.js"></script>
<script>
/* ===== MINI GAME LOGIC ===== */
const cv=document.getElementById("c"),ctx=cv.getContext("2d");
let p={x:20,y:120,vx:0,vy:0},g=0.5,onG=false;
const heart={x:260,y:110};
function draw(){
  ctx.clearRect(0,0,320,180);
  ctx.fillStyle="#654321";ctx.fillRect(0,140,320,40);
  ctx.fillStyle="#ff4d6d";ctx.fillRect(heart.x,heart.y,16,16);
  ctx.fillStyle="#222";ctx.fillRect(p.x,p.y,16,16);
}
function update(){
  p.vy+=g;p.x+=p.vx;p.y+=p.vy;
  if(p.y>124){p.y=124;p.vy=0;onG=true}
  if(Math.abs(p.x-heart.x)<16 && Math.abs(p.y-heart.y)<16){
    document.getElementById("game").style.display="none";
    document.getElementById("site").style.display="block";
    startSite();
    return;
  }
  draw();requestAnimationFrame(update);
}
update();
document.onkeydown=e=>{
  if(e.key==="ArrowRight")p.vx=2;
  if(e.key==="ArrowLeft")p.vx=-2;
  if(e.key==="ArrowUp"&&onG){p.vy=-8;onG=false}
};
document.onkeyup=()=>p.vx=0;
left.onclick=()=>p.vx=-2;
right.onclick=()=>p.vx=2;
jump.onclick=()=>{if(onG){p.vy=-8;onG=false}};

/* ===== MAIN SITE LOGIC ===== */
function startSite(){
  const yes=document.getElementById("yes");
  const no=document.getElementById("no");
  let yesCount=0;

  function rain(n){
    const em=["‚ú®","üíñ","üíò","‚≠ê","üî•"];
    for(let i=0;i<n;i++){
      const d=document.createElement("div");
      d.className="particle";
      d.textContent=em[Math.floor(Math.random()*em.length)];
      d.style.left=Math.random()*100+"vw";
      d.style.animationDuration=(Math.random()*2+2)+"s";
      document.body.appendChild(d);
      setTimeout(()=>d.remove(),4000);
    }
  }

  document.getElementById("zone").onmousemove=()=>{
    no.style.left=Math.random()*80+10+"%";
  };

  yes.onclick=()=>{
    yesCount++;rain(20+yesCount*10);
    if(yesCount>=4){
      document.getElementById("finalOverlay").style.display="flex";
    }
  };

  /* 3D background */
  const r=new THREE.WebGLRenderer({canvas:bg,antialias:false});
  r.setPixelRatio(Math.min(2,devicePixelRatio));
  const s=new THREE.Scene();s.background=new THREE.Color(0x06070c);
  const cam=new THREE.PerspectiveCamera(55,1,.1,200);
  cam.position.set(0,10,26);
  s.add(new THREE.HemisphereLight(0xffcce0,0x2b2f55,1.1));
  const d=new THREE.DirectionalLight(0xffffff,.6);
  d.position.set(10,20,10);s.add(d);
  const g=new THREE.BoxGeometry(1,1,1);
  const m=new THREE.MeshLambertMaterial({color:0x4caf50});
  const size=40;
  const mesh=new THREE.InstancedMesh(g,m,size*size);s.add(mesh);
  const o=new THREE.Object3D();let i=0;
  for(let x=0;x<size;x++)for(let z=0;z<size;z++){
    o.position.set(x-size/2,Math.sin(x*.3)+Math.cos(z*.3),z-size/2);
    o.updateMatrix();mesh.setMatrixAt(i++,o.matrix);
  }
  function rs(){r.setSize(innerWidth,innerHeight,false);cam.aspect=innerWidth/innerHeight;cam.updateProjectionMatrix()}
  addEventListener("resize",rs);rs();
  (function anim(t){
    requestAnimationFrame(anim);
    cam.lookAt(0,2,0);
    r.render(s,cam);
  })();
}
</script>

</body>
</html>
